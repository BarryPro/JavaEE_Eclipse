<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap
        PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd">


<sqlMap namespace="act_collcondeal_recd">

    <select id="qryCount" parameterClass="Map" resultClass="java.lang.Integer">
		SELECT count(1) 
		FROM ACT_COLLCONDEAL_RECD
		WHERE CONTRACT_NO = #CONTRACT_NO#
		AND YEAR_MONTH = #YEAR_MONTH#
		AND DEAL_FLAG = #DEAL_FLAG#
    </select>
	<update id="updDealFlag" parameterClass="Map">
		UPDATE ACT_COLLCONDEAL_RECD
   		SET DEAL_FLAG = '0'
 		WHERE CONTRACT_NO = #CONTRACT_NO#
  		AND YEAR_MONTH = #YEAR_MONTH#
   		AND DEAL_FLAG = '1'
	</update>
	
	<insert id="insertRecd" parameterClass="com.sitech.acctmgr.atom.domains.collection.CollConDealRecdEntity">
		INSERT INTO ACT_COLLCONDEAL_RECD(
			   LOGIN_SEQ,DETAIL_SEQ,YEAR_MONTH ,CONTRACT_NO,OP_DATE,LOGIN_NO,DEAL_FLAG)
			   VALUES (
			   #loginSeq#,#detailSeq#,#yearMonth#,#contractNo#,#opDate#,#loginNo#,#dealFlag#)
	</insert>
	
</sqlMap>

