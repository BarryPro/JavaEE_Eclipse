<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="dGprsShortMsgOffOn">
	<typeAlias alias="gprsChangeRecd" type="com.sitech.acctmgr.atom.domains.query.GprsChangeRecdEntity"/>
	<select id="qry" parameterClass="Map" resultClass="java.util.HashMap">
		select OffOn_type from dGprsShortMsgOffOn
		where phone_no=#PHONE_NO#
	</select>

	<insert id="insert" parameterClass="Map" >
		insert into dGprsShortMsgOffOn
		(phone_no,id_no,login_no,op_code,OffOn_type,login_accept,op_time)
		values(#PHONE_NO#,#ID_NO#,#LOGIN_NO#,#OP_CODE#,#OFFON_TYPE#,#LOGIN_ACCEPT#,sysdate)
	</insert>

	<delete id="delete" parameterClass="Map">
		delete from
		dGprsShortMsgOffOn
		where phone_no=#PHONE_NO#
		and op_code=#OP_CODE# and OffOn_type='D'
	</delete>

	<select id="qChangeRecd" parameterClass="Map" resultClass="gprsChangeRecd">
		SELECT LOGIN_ACCEPT loginAccept, OP_TIME closeTime, LOGIN_NO closeLoginNo
		FROM DGPRSSHORTMSGOFFON
		WHERE PHONE_NO = #PHONE_NO#
		AND TO_CHAR(OP_TIME, 'YYYYMM') BETWEEN #BEGIN_YM# AND #END_YM#
	</select>

</sqlMap>