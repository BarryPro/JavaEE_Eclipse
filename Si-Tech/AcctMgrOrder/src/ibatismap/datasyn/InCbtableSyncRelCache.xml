<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="in_cbtable_sync_CACHE">

 <cacheModel id="cbTabSyn_cache" type="LRU" readOnly="true">
  <flushInterval hours="24"/>
  <!-- 
  <flushOnExecute statement="in_msgsend_cache.insertCmsFile"/>
  <flushOnExecute statement="in_msgsend_cache.updateCmsFile"/>
  <flushOnExecute statement="in_msgsend_cache.deleteCmsFile"/>
   -->
  <property name="reference-type" value="WEAK"/>
 </cacheModel>
 
  <select id="qDistTables" parameterClass="Map" resultClass="java.util.HashMap">
	 SELECT distinct DEST_TABLE 
	   FROM IN_CBTABLE_SYNC_RELATION 
	  WHERE 1 = 1 
  </select>
 
  <select id="qDestTableBySrcTable" parameterClass="Map" resultClass="java.util.HashMap">
	 SELECT distinct DEST_TABLE 
	   FROM IN_CBTABLE_SYNC_RELATION 
	  WHERE SOURCE_TABLE=#SOURCE_TABLE# 
  </select>

  <select id="qDestDataBySrcDestTable" parameterClass="java.lang.String" resultClass="java.util.HashMap" cacheModel="cbTabSyn_cache">
	 SELECT DEST_TABLE,
		    DEST_COLUMN,
		    DATA_TYPE,
		    INDEX_FLAG,
		    SYNC_FLAG,
		    DEAL_FLAG,
		    DEAL_VALUE,
		    TRIGGER_FLAG,
		    CHG_TABLE,
		    OPER_FLAG 
	 FROM  IN_CBTABLE_SYNC_RELATION
	 WHERE SOURCE_TABLE=#SOURCE_TABLE# 
  </select>

</sqlMap>