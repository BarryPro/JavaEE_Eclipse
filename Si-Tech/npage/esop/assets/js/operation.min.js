var fixedAreaHeight=0,iframeH=0,winHeight=$(window).height(),tatolIndex=-1,currOneTabIndex=-1;$(function(){opTabOneChange();opTabOneDel();autoNav();$(window).on("resize",function(a){a.preventDefault();
$(".J_opIframe").css("height",($(window).height()-fixedAreaHeight)+"px");});$("#J_opTabOneDown").on("click",function(a){a.preventDefault();var b=$("#J_opTabOneBox").height();
$("#J_opTabOneBox").stop(true,true).animate({bottom:-b+"px"},300,function(){$("#J_opTabOneUp").stop(true,true).animate({bottom:0},300);});});$("#J_opTabOneUp").on("click",function(a){a.preventDefault();
var b=$("#J_opTabOneBox").height();$("#J_opTabOneUp").stop(true,true).animate({bottom:-b+"px"},300,function(){$("#J_opTabOneBox").stop(true,true).animate({bottom:0},300);
});});$("#J_opNav li.nav-sub-tab").hover(function(){var b=$(this),c=b.offset();opNavBoxH=$("#J_opNavBox").height(),opTabOneBoxH=$("#J_opTabOneBox").height(),opTopSubBnrBoxH=$("#J_opTopSubBnrBox").height(),opTopBnrBox=$("#J_opTopBnrBox").height()+10;
var a=$(window).height()-opNavBoxH-opTopSubBnrBoxH-opTopBnrBox-opTabOneBoxH;b.addClass("curr");b.siblings().removeClass("curr").find(".op-nav-sub-box").hide();
b.find(".op-nav-sub-dl").css({maxHeight:(a-60)+"px"});b.find(".op-nav-sub-box").css({left:-c.left+"px",width:$(window).width()+"px",height:a+"px"}).show().stop(true,true).slideDown();
},function(){var a=$(this);a.removeClass("curr").find(".op-nav-sub-box").hide();});$("#J_opNav").on("click",".tab-one",function(b){b.preventDefault();var a=$(this).attr("title");
addTabOne(a);});$("#J_opNav").on("click",".tab-two",function(b){b.preventDefault();var a=$(this).attr("title");addTabTwo(a);});$("#J_opSchServBtn").on("click",function(a){a.preventDefault();
var b=$("#J_opSchServIpt").val();addTabOne(b);});$(document).on("keydown",function(a){var b=a||window.event;if(b&&b.keyCode==13){var c=$("#J_opSchServIpt").val();
addTabOne(c);}});});function autoNav(){var e=$("#J_opNav > li"),a=e.length,c=8,b=[];$("#J_opNav").data("moreLiHtml","q");if((a>c)&&($(window).width()<1100)){for(var d=c;
d<a;d++){}$.data($("#J_opNav"),"moreLiHtml",b.join(""));console.log($("#J_opNav").data("moreLiHtml"));}}function autoGetIframeHeight(b){var d=$("#J_opTabOneBox").height(),c=43,f=$("#J_opNavBox").height(),a=$("#J_opTopSubBnrBox").height(),e=$("#J_opTopBnrBox").height()+14;
fixedAreaHeight=d+c+f+a+e+2;iframeH=winHeight-fixedAreaHeight;$("#J_opIframeBox").css("marginBottom",d+"px");$(b).css("height",iframeH+"px");}function opTabOneChange(){$("#J_opTabOne").on("click","li",function(c){c.preventDefault();
var b=$(this);b.addClass("curr");b.siblings().removeClass("curr");var a=b.find(".close-btn").attr("data-index");$("#J_opIframeBox .default-index").addClass("hide");
$("#J_opIframeBox .tab-one-body").addClass("hide");$("#J_opIframeBox").find(".one-body-"+a).removeClass("hide");currOneTabIndex=a;});}function opTabOneDel(){$("#J_opTabOne").on("click",".close-btn",function(d){d.preventDefault();
var c=$(this);var a=c.attr("data-index");var b=$("#J_opIframeBox").find(".one-body-"+a);b.remove();c.parent().remove();if(c.parent().hasClass("curr")){$("#J_opIframeBox .tab-one-body").addClass("hide");
$("#J_opIframeBox .default-index").removeClass("hide");}return false;});}function addTabOne(a){tatolIndex++;$("#J_opTabOne li").removeClass("curr");$("#J_opTabOne").append('<li class="curr"><span class="name"> '+a+' </span><img class="close-btn" data-index="'+tatolIndex+'" src="../pub-ui/images/e0d3ce8ca02c7904a9d7ab444d88b0da.png"></li>');
$("#J_opIframeBox .default-index").addClass("hide");$("#J_opIframeBox .tab-one-body").addClass("hide");createTabOneBody();opTabTwoChange();currOneTabIndex=tatolIndex;
}function createTabOneBody(){var a=[];a.push('<div class="tab-one-body one-body-'+tatolIndex+'">');a.push('<div class="op-tab-two-box">');a.push('<div class="container">');
a.push('<div class="mgl-10 mgr-10 clearfix" style="height:42px;">');a.push('<ul class="fl clearfix op-tab-two">');a.push("<li>");a.push('<span class="name">');
a.push("客户首页");a.push("</span>");a.push("</li>");a.push("</ul>");a.push("</div>");a.push("</div>");a.push("</div>");a.push('<div class="tab-two-body-box">');
a.push('<div class="tab-two-body">');a.push('<iframe class="J_opIframe" onload="autoGetIframeHeight(this);" style="width: 100%;" src="iframe.html" frameborder="0" scrolling="auto">');
a.push("</iframe>");a.push("</div>");a.push("</div>");a.push("</div>");$("#J_opIframeBox").append(a.join(""));}function opTabTwoChange(){$(".op-tab-two").on("click","li",function(c){c.preventDefault();
var b=$(this);b.addClass("curr");b.siblings().removeClass("curr");var a=b.find(".close-btn").attr("data-index");var d=$("#J_opIframeBox").find(".one-body-"+currOneTabIndex);
d.find(".tab-two-body-box .tab-two-body").addClass("hide");if(b.index()==0){d.find(".tab-two-body-box .tab-two-body").eq(0).removeClass("hide");}else{d.find(".tab-two-body-box").find(".two-body-"+a).removeClass("hide");
}});}function opTabTwoDel(){$(".op-tab-two").on("click",".close-btn",function(d){d.preventDefault();var c=$(this);var b=c.attr("data-index");var a=$("#J_opIframeBox").find(".one-body-"+currOneTabIndex).find(".tab-two-body");
console.log(b);if(c.parent().hasClass("curr")){$("#J_opIframeBox").find(".one-body-"+currOneTabIndex).find(".op-tab-two li").eq(0).addClass("curr");a.addClass("hide").eq(0).removeClass("hide");
}$("#J_opIframeBox").find(".one-body-"+currOneTabIndex).find(".two-body-"+b).remove();c.parent().remove();return false;});}function addTabTwo(a){var c=$("#J_opIframeBox").find(".one-body-"+currOneTabIndex);
var b=c.find(".op-tab-two li:last").find(".close-btn").attr("data-index");var d;if(b){var b=parseInt(b);d=b+1;}else{d=1;}c.find(".op-tab-two li").removeClass("curr");
c.find(".op-tab-two").append('<li class="curr"><span class="name">'+a+'</span><img class="close-btn" data-index="'+d+'" src="../pub-ui/images/e0d3ce8ca02c7904a9d7ab444d88b0da.png"></li>');
c.find(".tab-two-body-box .tab-two-body").addClass("hide");c.find(".tab-two-body-box").append('<div class="tab-two-body two-body-'+d+'"><iframe class="J_opIframe" onload="autoGetIframeHeight(this);" style="width: 100%;" src="iframe.html" frameborder="0" scrolling="auto"></iframe></div>');
opTabTwoDel();}