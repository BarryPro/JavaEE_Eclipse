<%
    /********************
     version v2.0
     开发商: si-tech
     *
     *update:zhanghonga@2008-08-27 页面改造,修改样式
     *     
     ********************/
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<%@ page contentType="text/html; charset=GBK" %>
<%@ include file="/npage/include/public_title_name.jsp" %>
<%
    String opCode = "1213";
    String opName = "综合变更";
    
    String orgCode = (String)session.getAttribute("orgCode");
    String regionCode = orgCode.substring(0,2);
    String workName = (String)session.getAttribute("workName");
    String sqIdtype = "select id_type,id_name from sidtype";
    String accountType = (String)session.getAttribute("accountType"); //1 为营业工号 2 为客服工号
    String display = "";
    System.out.println("accountType="+accountType);
    if("2".equals(accountType.trim())){
    	display ="style = \"display:none\"";
    }
    System.out.println("display="+display);
%>
		<wtc:pubselect name="sPubSelect" routerKey="phone" routerValue="<%=activePhone%>" outnum="2">
		<wtc:sql><%=sqIdtype%></wtc:sql>
		</wtc:pubselect>
		<wtc:array id="sIdTypeStr" scope="end" />
<%
    String workNo = (String) session.getAttribute("workNo");
    String nopass = (String) session.getAttribute("password");
    String iChnSource = "01";
    String iUserPwd = "";
    String[][] favInfo = (String[][])session.getAttribute("favInfo");

	/****
	//因为免密码校验统一放到框架中去了.这里可以废弃
	int favFlag = 0;
	for (int i = 0; i < favInfo.length; i++) {
		if (favInfo[i][0].trim().equals("a272")) {
		    favFlag = 1;
		}
	}
	***/
    
    int favFlag = 1;
    String org_codeT = orgCode;
    String region_codeT = org_codeT.substring(0, 2);
    String feeSql = "select function_code, hand_fee from sNewFunctionFee where region_code = '" + region_codeT + "'";
%>
		<wtc:pubselect name="sPubSelect" routerKey="phone" routerValue="<%=activePhone%>" outnum="2">
		<wtc:sql><%=feeSql%></wtc:sql>
		</wtc:pubselect>
		<wtc:array id="fee" scope="end" />
<%
    String workSql = "select count(*) from shighlogin where login_no = '" + workNo + "' and op_code='1218'";
%>
		<wtc:pubselect name="sPubSelect" routerKey="phone" routerValue="<%=activePhone%>" outnum="2">
		<wtc:sql><%=workSql%></wtc:sql>
		</wtc:pubselect>
		<wtc:array id="higflagArr" scope="end" />
<%
		String higflag="";
		if(higflagArr!=null&&higflagArr.length>0){
			higflag = higflagArr[0][0];
		}
%>


<HEAD>
    <TITLE>报停、挂失、复话、预销和销号</TITLE>

<script language="javascript">
var printFlag = 9;
var flag = 0;

onload = function() {

}

function doProcess(packet) {

    var backString = packet.data.findValueByName("backString");
    var cfmFlag = packet.data.findValueByName("flag");
    /***
    if (cfmFlag == 99) {
        if (backString == 1) {
            rdShowMessageDialog("验证成功！",2);
            document.frm.submit.disabled = false;
        } else {
            rdShowMessageDialog("密码不正确！");
            document.frm.submit.disabled = true;
        }
    }
    ***/
    
    if (cfmFlag == 1) {
        var errMsg = packet.data.findValueByName("errMsg");
        var errCode = packet.data.findValueByName("errCode");
        var errCodeInt = parseInt(errCode, 10);
        if (errCodeInt == 0) {
            rdShowMessageDialog("操作成功！",2);
            document.frm.backLoginAccept.value = backString[0][0];
            if (document.frm.opCode.value == "1218") {
                //rdShowMessageDialog(1);
                if (document.frm.handFee.value != 0) {
                    printTwoBill();
                } else {
                    printTwoBillZero();
                }

            }else if (document.frm.opCode.value == "1216") {
                if (document.frm.handFee.value != 0) {
                    printThreeBill();
                } else {
                    printThreeBillZero();
                }
            }else if (document.frm.handFee.value != 0) {
                printBill();
            }
            document.frm.phoneNo.value="<%=activePhone%>";
            document.frm.smName.value = "";
            document.frm.customPass.value = "";
            document.frm.userId.value = "";
            document.frm.runName.value = "";
            document.frm.gradeName.value = "";
            document.frm.totalPrepay.value = "";
            document.frm.totalOwe.value = "";
            document.frm.custName.value = "";
            document.frm.factPay.value = "";
            document.frm.remain.value = "";
            document.frm.remark.value = "";
            document.frm.cardType.value = "";
            document.frm.idCardNo.value = "";
            document.frm.custAddress.value = "";
            document.frm.backPrepay.value = "";
            document.frm.iccName.value = "";
            document.frm.iccNo.value = "";
            document.frm.innerTime.value = "";
            document.frm.backDate.value = "";
            document.frm.remark.value = "";
            document.frm.asCustName.value = "";
            document.frm.asCustPhone.value = "";
            document.frm.asIdType.options[0].selected = true;
            document.frm.asIdIccid.value = "";
            document.frm.asIdAddress.value = "";
            document.frm.asContractAddress.value = "";
            document.frm.asNotes.value = "";
            document.frm.productName.value = "";
            document.frm.loginAccept.value = "";
               
            document.frm.family_code.value = "";
            document.frm.family_order.value = "";
            document.frm.family_count.value = "";
            
            flag = 0;

            resett();

        } else {


            rdShowMessageDialog(errCode + ":" + errMsg);
            document.frm.vConID.value = "";
            document.frm.vPhoneNo.value = "";
            document.frm.productName.value = "";
            resett();
            return;
        }

    }
    if (cfmFlag == 9) {
        var errCode = packet.data.findValueByName("errCode");
        var errMsg = packet.data.findValueByName("errMsg");
        rdShowMessageDialog(errCode + " : " + errMsg);
        /*** ningtn CRM客服系统
        document.frm.qry.disabled = false;
				*/
        var ii = 0 ;
        for (ii = 0; ii < document.frm.radiobutton.length; ii ++) {
            document.all.radiobutton[ii].disabled = false;
        }
        flag = 0;
        return;
    }

    if (cfmFlag == 0) {

        var errMsg = packet.data.findValueByName("errMsg");
        var errCode = packet.data.findValueByName("errCode");
        var errCodeInt = parseInt(errCode, 10);

        document.frm.smName.value = backString[0][2];
        document.frm.customPass.value = backString[0][4];
        document.frm.userId.value = backString[0][0];
        document.frm.runName.value = backString[0][6];
        document.frm.gradeName.value = backString[0][8];
        document.frm.totalPrepay.value = backString[0][17];
        document.frm.totalOwe.value = backString[0][16];
        document.frm.custName.value = backString[0][3];
        document.frm.custAddress.value = backString[0][11];
        document.frm.cardType.value = backString[0][15];
        document.frm.idCardNo.value = backString[0][14];
        document.frm.iccNo.value = backString[0][14];
        document.frm.iccName.value = backString[0][13];
        document.frm.innerTime.value = backString[0][23];
        document.frm.backPrepay.value = backString[0][21];
        document.frm.lxPrepay.value = backString[0][22];
        document.frm.backDate.value = backString[0][24];
        if (document.frm.cardType.value.indexOf("中高端用户", 0) >= 0) {
            rdShowMessageDialog("该用户是中高端用户！");
        }
        if (document.frm.cardType.value.indexOf("中高端用户", 0) >= 0 && <%=higflag%> ==0 && document.frm.opCode.value == "1218"){
		        rdShowMessageDialog("该用户是中高端用户,此工号没有销号权限！");
		        return;
    		}

        document.frm.asCustName.value = backString[0][25];
        document.frm.asCustPhone.value = backString[0][26];


        var idI = 0 ;
        for (idI = 0; idI < document.frm.asIdType.length; idI ++) {

            if (document.frm.asIdType.options[idI].value == backString[0][27]) {
                document.frm.asIdType.options[idI].selected = true;
            }
        }
        document.frm.asIdIccid.value = backString[0][28];
        document.frm.asIdAddress.value = backString[0][29];
        document.frm.asContractAddress.value = backString[0][30];
        document.frm.asNotes.value = backString[0][31];
        document.frm.noBack.value = backString[0][32];
        document.frm.productName.value = backString[0][33];
        document.frm.loginAccept.value = backString[0][34];
        $("#hwAccept").val(backString[0][34]);
        document.frm.family_code.value =backString[0][35];
        document.frm.family_order.value = backString[0][36];
        document.frm.family_count.value = backString[0][37];

        document.frm.factPay.disabled = false;
        flag = 1;
        if (errCode == 0) {
            if (document.frm.favFlag.value == 1) {
                document.frm.submit.disabled = false;
            }
        }

        if (errCode != 0) {
            if (errCode == 121350) {
                rdShowMessageDialog(errCodeInt + " : " + errMsg);
                if (rdShowConfirmDialog('确认要进行销号变更吗？') != 1) {
                    return;
                }
                if (document.frm.favFlag.value == 1) {
                    document.frm.submit.disabled = false;
                }
            }
            else if (errCode == 1206) {
                rdShowMessageDialog(errCodeInt + " : " + errMsg);
                if (rdShowConfirmDialog('确认要进行销号变更吗？') != 1) {
                    return;
                }
                if (document.frm.favFlag.value == 1) {
                    document.frm.submit.disabled = false;
                }
            }
            else {

                if (errCode == 1201) {
                    errMsg = "找不到该服务号码";
                }


                if (errCode == 1202) {
                    errMsg = "此状态不允许变更";

                }
                if (errCode == 1203) {
                    errMsg = "此号码不允许异地操作";
                }
                if (errCode == 1204) {
                    errMsg = "此业务类型不允许做变更";
                }
                if (errCode == 1007) {
                    errMsg = "欠费状态不允许变更";
                }
                if (errCode == 1008) {
                    errMsg = "欠费状态不允许变更";
                }

                if (errCode == 1207) {
                    errMsg = "该用户已经销号";
                }


                rdShowMessageDialog(errCodeInt + " : " + errMsg);
                /*** ningtn CRM客服系统
                document.frm.qry.disabled = false;
                **/
                var ii = 0 ;
                for (ii = 0; ii < document.frm.radiobutton.length; ii ++) {
                    document.all.radiobutton[ii].disabled = false;
                }

                document.frm.smName.value = "";
                document.frm.customPass.value = "";
                document.frm.userId.value = "";
                document.frm.runName.value = "";
                document.frm.gradeName.value = "";
                document.frm.totalPrepay.value = "";
                document.frm.totalOwe.value = "";
                document.frm.custName.value = "";
                document.frm.remain.value = "";
                document.frm.remark.value = "";
                document.frm.factPay.value = "";
                document.frm.cardType.value = "";
                document.frm.idCardNo.value = "";
                document.frm.custAddress.value = "";
                document.frm.backPrepay.value = "";
                document.frm.lxPrepay.value = "";
                document.frm.noBack.value = "";
                document.frm.iccName.value = "";
                document.frm.iccNo.value = "";
                document.frm.innerTime.value = "";
                document.frm.remark.value = "";
                document.frm.asCustName.value = "";
                document.frm.asCustPhone.value = "";
                document.frm.asIdType.options[0].selected = true;
                document.frm.asIdIccid.value = "";
                document.frm.asIdAddress.value = "";
                document.frm.asContractAddress.value = "";
                document.frm.asNotes.value = "";
                document.frm.productName.value = "";
                document.frm.loginAccept.value = "";
                flag = 0;

            }

        }
    }


}
function submitt() {

    //added by hanfa 20070117
    for (var i = 0; i < document.frm.radiobutton.length; i++)
    {
        if (document.frm.radiobutton[i].checked)
        {
            document.all.radioValue.value = document.frm.radiobutton[i].value;
        }
    }
    var allInfo = "";
    var radioK = 0;

    for (radioK = 0; radioK < document.frm.radiobutton.length; radioK++) {
        if (document.frm.radiobutton[radioK].checked) {
            allInfo = document.frm.radiobutton[radioK].value;

        }
    }
    if (allInfo == "") {
        rdShowMessageDialog("请选择操作类型!");
        return;
    }
		/*** ningtn CRM客服系统
    document.frm.qry.disabled = true;
    ***/
    var ii = 0 ;
    for (ii = 0; ii < document.frm.radiobutton.length; ii ++) {
        document.all.radiobutton[ii].disabled = true;
    }
    var myPacket = new AJAXPacket("getUserInfo.jsp", "正在提交，请稍候......");
    myPacket.data.add("loginAccept", document.frm.loginAccept.value);
    myPacket.data.add("iChnSource", document.frm.iChnSource.value);
    myPacket.data.add("opCode", document.frm.opCode.value);
    myPacket.data.add("workNo", document.frm.workNo.value);
    myPacket.data.add("opCode", document.frm.opCode.value);
    myPacket.data.add("phoneNo", document.frm.phoneNo.value);
    myPacket.data.add("iUserPwd ", document.frm.iUserPwd .value);    
    core.ajax.sendPacket(myPacket);
    myPacket=null;
}
function getRemain() {

    if (flag != 1) {
        rdShowMessageDialog("请先查询用户信息！");
        return;
    }


    if (parseFloat(document.frm.handFee.value) > parseFloat(document.frm.handFeeT.value)) {
        rdShowMessageDialog("手续费不能大于" + document.frm.handFeeT.value);
        return;
    }

    document.frm.remain.value = document.frm.factPay.value - document.frm.handFee.value;
}


/******** 预销或销户时增加积分提示信息 added by hanfa 20070117 begin *********/
function formSubmitCfm()
{
	//getAfterPrompt();
    if (document.all.radioValue.value == '1216')
    {
        if (rdShowConfirmDialog("用户办理预销，积分将清零，请提示客户兑换积分。<br><br>确认进行下一步操作吗？") == 1)
        {
			/*************gonght add 2009-3-25 13:35:05***************/
			var count = document.all.family_count.value;
	 		var ret1 = document.all.family_order.value;
	 		if(typeof(ret1)!="undefined")
	 		{
	 			if((ret1==1)||(count<=3 && count!=0))
	 			{
	 				if(rdShowConfirmDialog('该成员预销后，家庭将解散，是否确认？')==1)
	 				{
	 					 submitCfm();
	 				}
	 				else
			        {
			            return false;
			        }
	 			}
	 			else
	 			{
	 				submitCfm();
	 			}
	 		}
	 		/*************gonght add end************************/
        }
        else
        {
            return false;
        }
    }
    else if (document.all.radioValue.value == '1218')
    {
        if (rdShowConfirmDialog("用户办理销号，积分将清零，请提示客户兑换积分。<br><br>确认进行下一步操作吗？") == 1)
        {
            submitCfm();
        }
        else
        {
            return false;
        }
    }
    else
    {
        submitCfm();
    }

}
/******** 预销或销户时增加积分提示信息 added by hanfa 20070117 end *********/


function submitCfm() 
{
	var op_code=document.frm.opCode.value;
	getAfterPrompt(op_code);
    if (flag == 1) {
        if (document.frm.remark.value.length == 0) {
            document.frm.remark.value = document.frm.sysRemark.value;
            document.frm.remark.value = "用户号码" + document.frm.phoneNo.value + "用户姓名" + document.frm.custName.value + "进行" + document.frm.remark.value + "。";
        }
        
        //if(document.frm.asNotes.value.trim().len()==0){
        		//document.frm.asNotes.value=document.frm.remark.value;
        // }
        if (!forMoney(document.frm.handFee)) {
            return;
        }
        if (parseFloat(document.frm.handFee.value) > parseFloat(document.frm.handFeeT.value)) {
            rdShowMessageDialog("手续费不能大于" + document.frm.handFeeT.value);
            return;
        }
        var idJ = 0 ;
        var inputIdType = 0;
        for (idJ = 0; idJ < document.frm.asIdType.length; idJ ++) {
            if (document.frm.asIdType.options[idJ].selected == true) {
                inputIdType = document.frm.asIdType.options[idJ].value;
            }
        }
     printCommit();
     if (printFlag != 1 && printFlag != 2) {
	        return;
	    }

	    document.frm.submit.disabled = true;
	    var vPhoneNo = document.frm.phoneNo.value;
			
	    var myPacket = new AJAXPacket("f1213Cfm.jsp?asCustName=" + document.frm.asCustName.value + "&asCustPhone=" + document.frm.asCustPhone.value + "&asIdIccid=" + document.frm.asIdIccid.value + "&asIdAddress=" + document.frm.asIdAddress.value + "&asContractAddress=" + document.frm.asContractAddress.value + "&asNotes=" + document.frm.asNotes.value + "&sysRemark=" + document.frm.sysRemark.value + "&remark=" + document.frm.remark.value, "正在提交，请稍候......");
	    myPacket.data.add("loginAccept", document.frm.loginAccept.value);
	    myPacket.data.add("iChnSource", document.frm.iChnSource.value);
	    myPacket.data.add("opCode", document.frm.opCode.value);
	    myPacket.data.add("workNo", document.frm.workNo.value);
	    myPacket.data.add("noPass", document.frm.noPass.value);
	    myPacket.data.add("idNo", document.frm.phoneNo.value); 
	    myPacket.data.add("iUserPwd", document.frm.iUserPwd.value);
	    myPacket.data.add("asIdType", inputIdType);
	    myPacket.data.add("orgCode", document.frm.orgCode.value);
	    myPacket.data.add("handFee", document.frm.handFeeT.value);
	    myPacket.data.add("factPay", document.frm.handFee.value);
	    myPacket.data.add("lx", document.frm.lxPrepay.value);
	    myPacket.data.add("ipAdd", document.frm.ipAdd.value);
	    myPacket.data.add("vConID", document.frm.vConID.value);
	    myPacket.data.add("backPrepay", document.frm.backPrepay.value);
	    myPacket.data.add("vPhoneNo", document.frm.vPhoneNo.value);
	    myPacket.data.add("book_phoneNo", document.frm.phoneNo.value);	
	    core.ajax.sendPacket(myPacket);
	    
	    myPacket=null;
	    if (printFlag == 2) {
	        var vEvalValue = GetEvalReq(1);
	        if (vEvalValue == 4) {
	            rdShowMessageDialog("用户未进行评价!");
	        }
	        var vEvalPacket = new AJAXPacket("../../npage/public/evalCfm.jsp?vEvalValue=" + vEvalValue, "正在提交用户满意度评价，请稍候......");
	        vEvalPacket.data.add("vLoginAccept", document.frm.loginAccept.value);
	        vEvalPacket.data.add("vOpCoce", document.frm.opCode.value);
	        vEvalPacket.data.add("vLoginNo", document.frm.workNo.value);
	        vEvalPacket.data.add("vPhoneNo", vPhoneNo);
	        core.ajax.sendPacket(vEvalPacket);
	        vEvalPacket=null;
	    }
    }
    else
    {
        rdShowMessageDialog("请先查询用户信息！");
    }
}

/***
function verifyPass() {
    if (flag == 1) {
        var m = document.frm.inputPass.value;
        var n = document.frm.customPass.value;

        var myPacket = new AJAXPacket("verifyPass.jsp", "正在提交，请稍候......");

        myPacket.data.add("inputPass", m);
        myPacket.data.add("customPass", n);
        core.ajax.sendPacket(myPacket);

        myPacket=null;
    } else {
        rdShowMessageDialog("请先查询用户信息！");
    }
}
***/
function resett() {
    printFlag = 9;
    document.frm.customPass.value = "";
    //document.frm.inputPass.value = "";
    document.frm.userId.value = "";
    document.frm.runName.value = "";
    document.frm.gradeName.value = "";
    document.frm.totalPrepay.value = "";
    document.frm.totalOwe.value = "";
    document.frm.custName.value = "";
    document.frm.smName.value = "";
    /*** ningtn CRM客服系统
    document.frm.qry.disabled = false;
    ***/
    document.frm.backPrepay.value = "";
    document.frm.lxPrepay.value = "";
    document.frm.noBack.value = "";
    document.frm.iccName.value = "";
    document.frm.iccNo.value = "";
    document.frm.innerTime.value = "";
    document.frm.asCustName.value = "";
    document.frm.asCustPhone.value = "";
    document.frm.asIdType.options[0].selected = true;
    document.frm.asIdIccid.value = "";
    document.frm.asIdAddress.value = "";
    document.frm.asContractAddress.value = "";
    document.frm.asNotes.value = "";
    document.frm.family_code.value = "";
    document.frm.family_order.value = "";
    document.frm.family_count.value = "";
    var ii = 0 ;
    for (ii = 0; ii < document.frm.radiobutton.length; ii ++) {
        document.all.radiobutton[ii].disabled = false;
    }


    document.frm.submit.disabled = true;
    document.frm.cardType.value = "";
    document.frm.idCardNo.value = "";
    document.frm.custAddress.value = "";
    flag = 0;
}

function f1213GetByPhone(formField) {
    if (document.frm.vPhoneNo.value == document.frm.phoneNo.value)
    {
        rdShowMessageDialog("转存号码不能于服务号码相同，请重新操作！");
        document.frm.vPhoneNo.value = "";
        document.frm.vPhoneNo.focus();
        return false;
    }
    /*   if(document.frm.vPhoneNo.value =="")
     {
        rdShowMessageDialog("转存号码不能为空，请重新操作！");
        document.frm.vPhoneNo.focus(); 
        return false;
     }*/
    document.all.vConID.value = "";

    var pageTitle = "帐户信息查询";
    var fieldName = "转存帐户|转存帐户名称";
    var selType = "S";    //'S'单选；'M'多选
    var retQuence = "0";
    var retToField = "vConID";
    var sqlStr = "select a.contract_no, a.bank_cust from dConMsg a, dCustMsg b, dConUserMsg c where a.contract_no = c.contract_no and   b.id_no = c.id_no and   b.phone_no  = '" + formField.value + "'";
    PubSimpSel(pageTitle, fieldName, sqlStr, selType, retQuence, retToField);
    if (document.all.vConID.value == "")
    {
        return false;
    }        
	
	//document.all.vConPaswd.focus();
}

//added by hanfa 20070117
//add by wanglma 20110613 判断账户专款是否到期
function showPreCancelInfo()
{
    rdShowMessageDialog("用户办理预销，积分将清零，请提示客户兑换积分。");
    var packet = new AJAXPacket("checkPhoneNoZK.jsp","请稍后...");
	packet.data.add("phoneNo" ,document.frm.phoneNo.value);
	core.ajax.sendPacket(packet,doMsg);//异步
	packet =null;
}
function doMsg(packet){
	var retCode = packet.data.findValueByName("retc"); 
	var retMsg = packet.data.findValueByName("retm");
	var flag1 = packet.data.findValueByName("flag");
	if(retCode=="000000" && flag1 == "Y"){
		rdShowMessageDialog("您参与的统一预存赠礼活动（手机活动）当前未结束，若您进行销户，所涉及营销活动的剩余费用将不再进行返还。");
	}
	if(retCode != "000000"){
		rdShowMessageDialog("errorCode :"+retCode+"  errorMsg :"+retMsg);
	}
}

//added by hanfa 20070117
function showCancelInfo()
{
    rdShowMessageDialog("用户办理销号，积分将清零，请提示客户兑换积分。");
}
function beforePrompt(){
	var op_code=$("input[@name=radiobutton][@checked]").val();
	var packet = new AJAXPacket("/npage/include/getBeforePrompt.jsp","请稍后...");
	packet.data.add("opCode" ,op_code);
	core.ajax.sendPacketHtml(packet,doGetBeforePrompt,true);//异步
	packet =null;
}
function doGetBeforePrompt(data)
{
	$('#wait').hide();
	$('#beforePrompt').html(data);
}
function getAfterPrompt(op_code)
{
	var packet = new AJAXPacket("/npage/include/getAfterPrompt.jsp","请稍后...");
	packet.data.add("opCode" ,op_code);
    core.ajax.sendPacket(packet,doGetAfterPrompt,false);//同步
	packet =null;
}

function doGetAfterPrompt(packet)
{
	var retCode = packet.data.findValueByName("retCode"); 
	var retMsg = packet.data.findValueByName("retMsg"); 
	if(retCode=="000000"){
		promtFrame(retMsg);
	}
}

function clickRadio(){
	submitt();
}


function printCommit()
{
    showPrtDlg("Detail", "确实要进行电子免填单打印吗？", "Yes");
}
function showPrtDlg(printType, DlgMessage, submitCfn)
{  //显示打印对话框 
	var h=210;
	var w=400;
    var t = screen.availHeight / 2 - h / 2;
    var l = screen.availWidth / 2 - w / 2;
    var opCode=$("input[@name=radiobutton][@checked]").val();
	var pType="subprint";
	var billType="1";
	var mode_code=null;
	var fav_code=null;
	var area_code=null;
	var sysAccept = document.frm.loginAccept.value;
    var printStr = printInfo(printType);
    /* ningtn */
    var iccidInfoStr = $("#firstId").val() + "|" + $("#secondId").val();	
		var accInfoStr = $("#accInfoHid1").val() + "|" +$("#accInfoHid2").val()+ "|" +$("#accInfoHid3").val()+ "|" +$("#accInfoHid4").val();
    /* ningtn */
    var iRetrun = 0;
    var prop = "dialogHeight:" + h + "px; dialogWidth:" + w + "px; dialogLeft:" + l + "px; dialogTop:" + t + "px;toolbar:no; menubar:no; scrollbars:yes; resizable:no;location:no;status:no;help:no"
		var path = "<%=request.getContextPath()%>/npage/innet/hljBillPrint_jc_hw.jsp?DlgMsg=" + DlgMessage+ "&iccidInfo=" + iccidInfoStr + "&accInfoStr="+accInfoStr;
    var path = path  + "&mode_code="+mode_code+"&fav_code="+fav_code+"&area_code="+area_code+"&opCode="+opCode+"&sysAccept="+sysAccept+"&phoneNo=<%=activePhone%>&submitCfm=" + submitCfn+"&pType="+pType+"&billType="+billType+ "&printInfo=" + printStr;
    var ret = window.showModalDialog(path, printStr, prop);
		/* ningtn  CRM客服系统报停、复话功系统确认慢 删除原有没用的判断 */
    ret = "confirm";
    if ((ret == "confirm") && (submitCfn == "Yes"))
    {
        iRetrun = showEvalConfirmDialog('确认要进行此项服务吗？');
        if (iRetrun == 1)
        {
            if (document.frm.cardType.value.indexOf("中高端用户", 0) >= 0 && document.frm.opCode.value == "1218") {
                if (rdShowConfirmDialog('该用户是中高端用户，确认要销号吗？') == 1) {
                    printFlag = 1;
                }
            } else {
                printFlag = 1;
            }
        } else if (iRetrun == 2)
        {//王良 2008年1月2日增加
            if (document.frm.cardType.value.indexOf("中高端用户", 0) >= 0 && document.frm.opCode.value == "1218") {
                if (rdShowConfirmDialog('该用户是中高端用户，确认要销号吗？') == 1) {
                    printFlag = 2;
                }
            } else {
                printFlag = 2;
            }
        }
    }
    
}

function printInfo(printType)
{
	var retInfo = "";
    if (printType == "Detail")
    {       
	     var cust_info="";
		 var opr_info="";
		 var note_info1="";
		 var note_info2="";
		 var note_info3="";
		 var note_info4="";        
        cust_info += "客户姓名：" + document.all.custName.value + "|";
        cust_info += "手机号码：" + document.all.phoneNo.value + "|";
        cust_info += "客户地址：" + document.all.custAddress.value + "|";
        cust_info += "证件号码：" + document.all.idCardNo.value + "|";
        for (var i = 0; i < document.frm.radiobutton.length; i ++) {
            if (document.all.radiobutton[i].checked)
            {
                var radio1 = document.all.radiobutton[i].value
                if (radio1 == "1213")
                {	
                    opr_info += "用户品牌：" + document.frm.smName.value + "*" + "办理业务：报停" + "|";
                    opr_info += "操作流水：" + document.frm.loginAccept.value + "|";
                    opr_info += "用户资费：" + document.frm.productName.value + "|";
                } else if (radio1 == "1215") {
                    opr_info += "用户品牌：" + document.frm.smName.value + "*" + "办理业务：复话" + "|";
                    opr_info += "操作流水：" + document.frm.loginAccept.value + "|";
                    opr_info += "用户资费：" + document.frm.productName.value + "|";
                } else if (radio1 == "1218") {
                    opr_info += "用户品牌：" + document.frm.smName.value + "*" + "办理业务：销号" + "|";
                    opr_info += "操作流水：" + document.frm.loginAccept.value + "|";
                } else if (radio1 == "1216") {
                    opr_info += "用户品牌：" + document.frm.smName.value + "*" + "办理业务：预销" + "|";
                    opr_info += "操作流水：" + document.frm.loginAccept.value + "|";
                    opr_info += "用户资费：" + document.frm.productName.value + "|";
                  /*opr_info += "说明：办理预销后，请您于下月5日后到营业厅办理正式销号手续。预销3个月，" + "|";
                    opr_info += "客户未办理正式销号手续，将按客户自动销号处理。预销恢复时，恢复费用的收取，" + "|";
                    opr_info += "同时补收预销期间的费用。" + "|";  */
                } else if (radio1 == "1217") {
                    opr_info += "用户品牌：" + document.frm.smName.value + "*" + "办理业务：预销恢复" + "|";
                }else{
                	 opr_info +="|";
                }  
            }
        }
        
	note_info1+="备注："+"|";
	
	//retInfo = cust_info+"#"+opr_info+"#"+note_info1+"#"+note_info2+"#"+note_info3+"#"+note_info4+"#";
	retInfo = strcat(cust_info,opr_info,note_info1,note_info2,note_info3,note_info4);
	retInfo=retInfo.replace(new RegExp("#","gm"),"%23");
    }
    if (printType == "Bill")
    {    //打印发票
    }

    return retInfo;
}
    function printBill() {
        var infoStr = "";
        infoStr += " " + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("yyyy", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("MM", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("dd", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += document.frm.phoneNo.value + "|";//移动号码                                                                                                    
        infoStr += "" + "|";//合同号码                                                          
        infoStr += document.frm.custName.value + "|";//用户名称                                                
        infoStr += document.frm.custAddress.value + "|";//用户地址  
        infoStr += "现金" + "|";
        infoStr += document.frm.handFee.value + "|";
        infoStr += document.frm.sysRemark.value + "。*手续费：" + document.frm.handFee.value + "*流水号：" + document.frm.backLoginAccept.value + "|";
	      //rdShowMessageDialog("-"+infoStr+"-");
        location.href = "chkPrint.jsp?accept=" + document.frm.backLoginAccept.value
        	 + "&opCode=" + document.all.radioValue.value
        	 + "&retInfo=" + infoStr + "&dirtPage=f1213.jsp&activePhone=<%=activePhone%>";
    }
    function printTwoBill() {
        var infoStr = "";
        infoStr += " " + "|";
        if (document.frm.backPrepay.value.length == 0) {
            document.frm.backPrepay.value = 0;
        }
        if (document.frm.lxPrepay.value.length == 0) {
            document.frm.lxPrepay.value = 0;
        }
        infoStr += '<%=new java.text.SimpleDateFormat("yyyy", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("MM", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("dd", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += document.frm.phoneNo.value + "|";//移动号码                                                                                                    
        infoStr += document.frm.backPrepay.value + "*" + document.frm.lxPrepay.value + "*" + document.frm.noBack.value + "|";//合同号码                                                          
        infoStr += document.frm.custName.value + "|";//用户名称                                                
        infoStr += document.frm.custAddress.value + "|";//用户地址  
        infoStr += "现金" + "|";
        infoStr += document.frm.handFee.value + "|";
        infoStr += document.frm.sysRemark.value + "。*手续费：" + document.frm.handFee.value + "*流水号：" + document.frm.backLoginAccept.value + "|";
        location.href = "chkTwoPrint.jsp?accept=" + document.frm.backLoginAccept.value
        	 + "&opCode=" + document.all.radioValue.value
        	 + "&retInfo=" + infoStr + "&dirtPage=f1213.jsp&activePhone=<%=activePhone%>";
    }
    function printTwoBillZero() {
        var infoStr = "";
        infoStr += " " + "|";
        if (document.frm.backPrepay.value.length == 0) {
            document.frm.backPrepay.value = 0;
        }
        if (document.frm.lxPrepay.value.length == 0) {
            document.frm.lxPrepay.value = 0;
        }
        infoStr += '<%=new java.text.SimpleDateFormat("yyyy", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("MM", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("dd", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += document.frm.phoneNo.value + "|";//移动号码                                                                                                    
        infoStr += document.frm.backPrepay.value + "*" + document.frm.lxPrepay.value + "*" + document.frm.noBack.value + "|";//合同号码                                                           
        infoStr += document.frm.custName.value + "|";//用户名称                                                
        infoStr += document.frm.custAddress.value + "|";//用户地址  
        infoStr += "现金" + "|";
        infoStr += document.frm.handFee.value + "|";
        infoStr += document.frm.sysRemark.value + "。*手续费：" + document.frm.handFee.value + "*流水号：" + document.frm.backLoginAccept.value + "|";
        location.href = "chkTwoPrintZero.jsp?accept=" + document.frm.backLoginAccept.value
        	 + "&opCode=" + document.all.radioValue.value
        	 + "&retInfo=" + infoStr + "&dirtPage=f1213.jsp&activePhone=<%=activePhone%>";
    }
    function printThreeBill() {
        var infoStr = "";
        infoStr += document.frm.remark.value + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("yyyy", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("MM", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("dd", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += document.frm.phoneNo.value + "|";//移动号码                                                                                                    
        infoStr += document.frm.backPrepay.value + "|";//可退预存                                                          
        infoStr += document.frm.custName.value + "|";//用户名称                                                
        infoStr += document.frm.custAddress.value + "|";//用户地址  
        infoStr += document.frm.idCardNo.value + "|";//证件号码
        infoStr += document.frm.handFee.value + "|";
        infoStr += document.frm.sysRemark.value + "。*手续费：" + document.frm.handFee.value + "*流水号：" + document.frm.backLoginAccept.value + "|";
	 			//infoStr+=document.frm.backDate.value+"|";
        //rdShowMessageDialog(document.frm.backDate.value);
        location.href = "chkThreePrint.jsp?accept=" + document.frm.backLoginAccept.value
        	 + "&opCode=" + document.all.radioValue.value
        	 + "&backDate=" + document.frm.backDate.value + "&retInfo=" + infoStr + "&dirtPage=f1213.jsp&activePhone=<%=activePhone%>";
    }
    function printThreeBillZero() {
        var infoStr = "";
        infoStr += document.frm.remark.value + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("yyyy", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("MM", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += '<%=new java.text.SimpleDateFormat("dd", Locale.getDefault()).format(new java.util.Date())%>' + "|";
        infoStr += document.frm.phoneNo.value + "|";//移动号码                                                                                                    
        infoStr += document.frm.backPrepay.value + "|";//可退预存                                                          
        infoStr += document.frm.custName.value + "|";//用户名称                                                
        infoStr += document.frm.custAddress.value + "|";//用户地址  
        infoStr += document.frm.idCardNo.value + "|";//证件号码
        infoStr += document.frm.handFee.value + "|";
        infoStr += document.frm.sysRemark.value + "。*手续费：" + document.frm.handFee.value + "*流水号：" + document.frm.backLoginAccept.value + "|";
	      //infoStr+=document.frm.backDate.value+"|";
        //rdShowMessageDialog(document.frm.backDate.value);
        location.href = "chkThreePrintZero.jsp?accept=" + document.frm.backLoginAccept.value
        	 + "&opCode=" + document.all.radioValue.value
        	 + "&backDate=" + document.frm.backDate.value + "&retInfo=" + infoStr + "&dirtPage=f1213.jsp&activePhone=<%=activePhone%>";
    }
</script>
</HEAD>
<body>
<FORM action="" method=post name="frm">
<%@ include file="/npage/include/header.jsp" %>
<div class="title">
    <div id="title_zi">请选择操作类型</div>
</div>
<!-- added by hanfa 20070117 -->
<input type="hidden" name="radioValue" value="">
<table cellspacing="0">
<tbody>
<tr>
<%if (fee.length != 0) {%>
<td class="blue"  width="11%">操作类型</td>
<td>
    <input type="radio" name="radiobutton" value="1213" index="0"
    <%
    
    
    int tmd1 = 0;
     int tmd11 = 0;
     for(int i = 0 ; i < fee.length ; i ++){
        if(tmd1==0){
        if(fee[i][0].equals("1213")){
          tmd1 = 1;
        System.out.println("1213数据库中有值"+fee[i][2]+fee[i][3]);
    
    
    
    %>
           onclick="beforePrompt(); 
            <%
		for(int j = 0 ;  j< favInfo.length ; j ++){
		if(favInfo[j][0].trim().equals(fee[i][3])){
		tmd11 = 1;
	%>
	document.frm.handFee.disabled=false;
            <%}}%>
            <%if(tmd11==0){%>document.frm.handFee.disabled=true;<%}%> noBackDiv.style.display='none';backDiv.style.display='none';document.frm.sysRemark.value='报停变更';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;"
    <%
    
    
    

    }}}if(tmd1==0){
    //System.out.println("不执行");
    
    
    
    %>
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.handFee.disabled=true;document.frm.opCode.value='1213';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='报停变更';beforePrompt();clickRadio();"


    <%
    
    
    
    
    }
    
    
    %>


      >报停
</td>


<td <%=display%>>
    <input type="radio" name="radiobutton" value="1214" index="1"

    <%
    
    
    
       int tmd2 = 0 ;
       int tmd22 = 0;
       for(int i = 0 ; i < fee.length ; i ++){
        if(tmd2==0){
        if(fee[i][0].equals("1214")){
    //System.out.println("1214数据库中有值"+fee[i][2]+fee[i][3]);
    tmd2=1;
    
    
    
    %>
           onclick="beforePrompt();
            <%for(int j = 0 ;  j< favInfo.length ; j ++){
	if(favInfo[j][0].trim().equals(fee[i][3])){
	//System.out.println("允许变更");
	tmd22 = 1;
	%>
            document.frm.handFee.disabled=false;document.frm.sysRemark.value='挂失变更';
            <%}}%>
            
            <%if(tmd22 == 0){%>document.frm.handFee.disabled=true;<%}%>
            noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;clickRadio();"


    <%
    
    
    }}}if(tmd2==0){
    
    
    
    
    %>
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.handFee.disabled=true;document.frm.opCode.value='1214';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='挂失变更';beforePrompt();clickRadio();"
    <%
    
    
    
    
    }
    
    
    %>>挂失
</td>

<!-- yuanqs add 2010/9/15 14:12:02 客服整合要求显示复话按钮 去掉<%=display%>-->
<td>
    <input type="radio" name="radiobutton" value="1215" index="2"
    <%
    
    
    
       int tmd3 = 0;
       int tmd33 = 0;
       for(int i = 0 ; i < fee.length ; i ++){
        if(tmd3 == 0){
        if(fee[i][0].equals("1215")){
     tmd3=1;   
    
    
    
    %>
           onclick="beforePrompt();
            <%for(int j = 0 ;  j< favInfo.length ; j ++){
	if(favInfo[j][0].trim().equals(fee[i][3])){
	tmd33 =1;
	%>
            document.frm.handFee.disabled=false;document.frm.sysRemark.value='复话变更';
            <%}}%>
            <%if(tmd33 == 0){%>document.frm.handFee.disabled=true;<%}%>
            noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;clickRadio();"

    <%
    
    
    }}}if(tmd3==0){
    
    
    
    
    %>
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.handFee.disabled=true;document.frm.opCode.value='1215';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='复话变更';beforePrompt();clickRadio();"
    <%
    
    
    
    
    }
    
    
    %>>复话
</td>


<td <%=display%>>
    <input type="radio" name="radiobutton" value="1216" index="3"
    <%
    
    
    
       int tmd4 = 0 ;
       int tmd44 = 0;
       for(int i = 0 ; i < fee.length ; i ++){
        if(tmd4 == 0){
        if(fee[i][0].equals("1216")){
        tmd4 = 1;
    
    
    
    %>
           onclick="showPreCancelInfo();beforePrompt();
            <%for(int j = 0 ;  j< favInfo.length ; j ++){
	if(favInfo[j][0].trim().equals(fee[i][3])){
	tmd44 =1;
	%>
            document.frm.handFee.disabled=false;document.frm.sysRemark.value='预销';
            <%}}%>
            <%if(tmd44 == 0 ){%>document.frm.handFee.disabled=true;<%}%>
            <%if(tmd4==0){%>document.frm.handFee.disabled=true;<%}%>
            
            noBackDiv.style.display='';backDiv.style.display='';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;clickRadio();"

    <%
    
    
    }}}if(tmd4==0){
    
    
    
    
    %>
           onclick="showPreCancelInfo();noBackDiv.style.display='';backDiv.style.display='';document.frm.handFee.disabled=true;document.frm.opCode.value='1216';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='预销';beforePrompt();clickRadio();"

    <%
    
    
    
    
    }
    
    
    %>>预销
</td>


<td <%=display%>>
    <input type="radio" name="radiobutton" value="1217"
    <%
    
    
    
    int tmd5 = 0;
    int tmd55 = 0;
    for(int i = 0 ; i < fee.length ; i ++){
        if(tmd5 == 0){
        if(fee[i][0].equals("1217")){
        tmd5 = 1;
    
    
    
    %>

           onclick="beforePrompt();
            <%for(int j = 0 ;  j< favInfo.length ; j ++){
	if(favInfo[j][0].trim().equals(fee[i][3])){
	tmd55 = 1;
	%>
            document.frm.handFee.disabled=false;document.frm.sysRemark.value='预销恢复';
            <%}}%>
            
            <%if(tmd55 == 0){%>document.frm.handFee.disabled=true;<%}%>
            noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;clickRadio();"

    <%
    
    
    }}}if(tmd5==0){
    
    
    
    
    %>
           onclick="beforePrompt();noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1217';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='预销恢复';clickRadio();"
    <%
    
    
    
    
    }
    
    
    %>>预销恢复
</td>


<td <%=display%>>
    <input type="radio" name="radiobutton" value="1218" index="4"
    <%
    
    
    
       int tmd6 = 0;
       int tmd66 = 0;
       for(int i = 0 ; i < fee.length ; i ++){
        if(tmd6==0){
        if(fee[i][0].equals("1218")){
        tmd6 =1;
    
    
    
    
    %>
           onclick="showCancelInfo();beforePrompt();
            <%for(int j = 0 ;  j< favInfo.length ; j ++){
	if(favInfo[j][0].trim().equals(fee[i][3])){
	tmd66 = 1;
	%>
	
            document.frm.handFee.disabled=false;document.frm.sysRemark.value='销号变更';
            <%}}%>
            
            <%if(tmd66 == 0){%>document.frm.handFee.disabled=true;<%}%>
            noBackDiv.style.display='';backDiv.style.display='none';document.frm.opCode.value=<%=fee[i][0]%>;document.frm.handFee.value=<%=fee[i][2]%>;document.frm.handFeeT.value=<%=fee[i][2]%>;clickRadio();"

    <%
    
    
    }}}if(tmd6==0){
    
    
    
    %>

           onclick="showCancelInfo();noBackDiv.style.display='';backDiv.style.display='none';document.frm.opCode.value='1218';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='销号变更';beforePrompt();clickRadio();"

    <%
    
    
    
    
    
    }
    
    
    %>>销号
</td>

<%} else {%>
<td class="blue" nowrap >操作类型</td>

<td>
    <input type="radio" name="radiobutton" index="0" value="1213"
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1213';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='报停变更';clickRadio();">报停
</td>
<td <%=display%>>
    <input type="radio" name="radiobutton" index="1" value="1214"
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1214';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='挂失变更';clickRadio();">挂失
</td>
<!-- yuanqs add 2010/9/15 14:42:27 客服整合要求恢复复话功能去掉 <%=display%> -->
<td>
    <input type="radio" name="radiobutton" index="2" value="1215"
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1215';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='复话变更';clickRadio();">复话
</td>

<td <%=display%>>
    <input type="radio" name="radiobutton" index="3" value="1217"
           onclick="noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1216';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='预销变更';showPreCancelInfo();clickRadio();">预销
</td>
<!--
<td>
  <input type="radio" name="radiobutton" value="1217" onclick="lxDiv.style.display='none';noBackDiv.style.display='none';backDiv.style.display='none';document.frm.opCode.value='1217';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='预销恢复变更';">预销恢复
</td>
-->
<td <%=display%>>
    <input type="radio" name="radiobutton" index="4" value="1218"
           onclick="noBackDiv.style.display='';backDiv.style.display='';document.frm.opCode.value='1218';document.frm.handFee.value='0';document.frm.handFeeT.value='0';document.frm.sysRemark.value='销号变更';showCancelInfo();clickRadio();">销号
</td>
<%}%>


</tr>
</TBODY>
</TABLE>
			</div>
			<div id="Operation_Table"> 
			<div class="title">
				<div id="title_zi">用户信息</div>
			</div>
<table cellspacing="0">
<tbody>
<tr>
    <td class="blue" width="12%" nowrap>服务号码</td>
    <td colspan="5">
        <%if (workNo.substring(0, 1).trim().equals("kk")) {%>
        <%String userPhoneNo = (String) session.getAttribute("userPhoneNo");%>
        <input
                id=Text2 type=text size=17 name=phoneNo v_type="mobphone" v_name="服务号码" disabled maxlength=11 index="5"
                onKeyUp="if(event.keyCode==13)submitt()" value="<%=userPhoneNo%>">
        <%} else {%>
        <input class="InputGrey" id=Text2 type=text size=17 name=phoneNo value="<%=activePhone%>" readonly>
        <%}%>
				<!-- ningtn CRM客服系统需求
        <input class="b_text" id=Text2 type=button size=17 name=qry value="查询" onclick="submitt()">
        -->
    </td>

		<!---
    <td class="blue">用户密码</td>
    <td colspan="3">

        <jsp:include page="/npage/common/pwd_one1.jsp">
            <jsp:param name="width1" value="16%"/>
            <jsp:param name="width2" value="34%"/>
            <jsp:param name="pname" value="inputPass"/>
            <jsp:param name="pwd" value="12345"/>
        </jsp:include>


        <%if (favFlag == 0) {%>
        <input id=Text2 type=button class="b_text" size=17 name=verifyPass1 value="验证密码" onclick="verifyPass()">
        <%} else {%>
        <input id=Text2 type=button class="b_text" size=17 name=verifyPass1 value="验证密码" onclick="verifyPass()" disabled>
        <%}%>
    </td>
		--->
</tr>
<tr>
    <td class="blue" width="12%" nowrap>用户ID</td>
    <td width="21%">
        <input id=Text2 type=text size=17 name=userId class="InputGrey" readonly>
    </td>
    <td class="blue" width="12%" nowrap>当前状态</td>
    <td width="21%">
        <input type=text size=17 name=runName class="InputGrey" readonly>
    </td>
    <td class="blue" width="12%" nowrap>级别</td>
    <td>
        <input type=text size=17 name=gradeName class="InputGrey" readonly>
    </td>
</tr>
<tr>
    <td class="blue">当前预存</td>
    <td>
        <input
                id=Text2 type=text size=17 name=totalPrepay class="InputGrey" readonly>
    </td>
    <td class="blue">当前欠费</td>
    <td>
        <input id=Text2 type=text size=17 name=totalOwe class="InputGrey" readonly>
    </td>
    <td class="blue" nowrap>大客户标志</td>
    <td>
        <input type=text size=15 name=cardType class="InputGrey" readonly>
    </td>
</tr>
<tr>
    <td class="blue"> 客户名称</td>
    <td>
        <input type=text size=17 name=custName class="InputGrey" readonly>
    </td>
    <td class="blue"> 产品名称</td>
    <td align=left colspan="3">
        <input type=text size=56 name=productName class="InputGrey" readonly>
    </td>
</tr>
<tr id=noBackDiv style="display:none">
    <td class="blue">不可退预存</td>
    <td>
        <input id=Text2 type=text size=17 name=noBack class="InputGrey" readonly>
    </td>
    <td class="blue">可退预存</td>
    <td>
        <input id=Text2 type=text size=17 name=backPrepay class="InputGrey" readonly>
    </td>
    <td class="blue">利息</td>
    <td width="19%" colspan=2>
        <input id=Text2 type=text size=17 name=lxPrepay class="InputGrey" readonly>
    </td>
</tr>
<tr id=backDiv style="display:none">
    <td class="blue">转存号码</td>
    <td>
        <input type=text maxlength="11" size=17 name=vPhoneNo>
        <input class="b_text" type="button" name="qCustIdByPhone" value="查询" onClick="f1213GetByPhone(vPhoneNo)">
    <td class="blue">转存帐户</td>
    <td width="19%" colspan=4>
        <input type=text size=17 name=vConID class="InputGrey" readonly>
    </td>
</tr>
<tr>
    <td class="blue"> 证件名称</td>
    <td>
        <input id=Text2 type=text size=17 name=iccName class="InputGrey" readonly>
    </td>
    <td class="blue">证件号码</td>
    <td>
        <input id=Text2 type=text size=17 name=iccNo class="InputGrey" readonly>
    </td>
    <td class="blue">入网时间</td>
    <td width="19%" colspan=2>
        <input id=Text2 type=text size=17 name=innerTime class="InputGrey" readonly>
    </td>
</tr>
<tr style=display:none>
    <td class="blue"> 担保人名称</td>
    <td>
        <input id=Text2 type=text size=17 name=asCustName maxlength=20
               onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');">
    </td>
    <td class="blue">担保人联系电话</td>
    <td>
        <input id=Text2 type=text size=17 name=asCustPhone maxlength=20>
    </td>
    <td class="blue">担保人联系地址</td>
    <td colspan=2>
        <input id=Text2 type=text size=17 name=asContractAddress maxlength=20
               onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');">
    </td>
</tr>
<tr style=display:none>
    <td class="blue"> 担保人证件类型</td>
    <td>
        <select size=1 name=asIdType>
            <%for (int i = 0; i < sIdTypeStr.length; i++) {%>
            <option value="<%=sIdTypeStr[i][0]%>"><%=sIdTypeStr[i][1]%>
            </option>
            <%}%>
        </select>
    </td>
    <td class="blue">担保人证件号码</td>
    <td>
        <input id=Text2 type=text size=17 name=asIdIccid maxlength=20
               onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');">
    </td>
    <td class="blue">担保人证件地址</td>
    <td width="19%" colspan=2>
        <input id=Text2 type=text size=17 name=asIdAddress maxlength=20
               onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');">
    </td>
</tr>
<tr style="display:none">
    <td class="blue">担保备注</td>
    <td colspan="5">
        <input id=Text21 type=text size=17 name=asNotes1 maxlength=20
               onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');">
    </td>
</tr>

    <tr>
        <td class="blue">手续费</td>
        <td>
            <input id=Text2 type=text size=17 name=handFee disabled v_type=float v_name="手续费" index="7">
        </td>
        <td class="blue">实收</td>
        <td>
            <input
                    id=Text2 type=text size=17 name=factPay index="8" disabled 
                    onKeyUp="if(event.keyCode==13){getRemain()}">&nbsp;<input
                id=Text2 type=button size=17
                name=getUseInfo class="b_text" value="-->"
                onclick="getRemain()">
        </td>
        <td class="blue">找零</td>
        <td>
            <input id=Text2 type=text size=17 name=remain disabled>
        </td>
    </tr>
    <tr>
        <td class="blue">系统备注</td>
        <td colspan="5"><input id=Text3 type=text size=80 name=remark value=""></td>
    </tr>
    <tr>
        <td class="blue">用户备注</td>
        <td colspan="5"><input id=Text2 type=text size=80 name=asNotes maxlength=60
                   onkeyup="value=value.replace(/[@#$%!^&*()<>?|]/g,'');" index="9">
        </td>
    </tr>   
</table>
<jsp:include page="/npage/public/hwReadCustCard.jsp">
	<jsp:param name="hwAccept" value="12"  />
	<jsp:param name="showBody" value="01"  />
</jsp:include>
<TABLE cellSpacing="0">
    <TBODY>
        <TR>
            <TD id="footer">
                <input class="b_foot" name=submit type=button value="确认" index="10"
                       onKeyUp="if(event.keyCode==13){formSubmitCfm()}" onclick="formSubmitCfm()" 
                       disabled>
                &nbsp;&nbsp;
                <input class="b_foot" name=back type=button value="清除" onclick="window.location='f1213.jsp?activePhone=<%=activePhone%>'">
                &nbsp;&nbsp;
                <input class="b_foot" name=back type=button value="关闭" onclick="parent.removeTab('<%=opCode%>')">
                &nbsp;&nbsp;
            </TD>
        </TR>
    </TBODY>
</TABLE>
<input type=hidden name=family_code> <!--家庭代码-->
<input type=hidden name=family_order>	<!--家庭位置-->
<input type=hidden name=family_count> <!--家庭人数-->
<input type=hidden name=opCode>
<input type=hidden name=workNo value=<%=workNo%>>
<input type=hidden name=noPass value=<%=nopass%>>
<input type=hidden name=orgCode value=<%=orgCode%>>
<input type=hidden name=iChnSource value=<%=iChnSource%>>  <!--渠道标识-->
<input type=hidden name=iUserPwd value=<%=iUserPwd%>>  <!--号码密码 -->
<input type=hidden name=sysRemark value="综合变更">
<input type=hidden name=ipAdd value="<%=request.getRemoteAddr()%>">
<input type=hidden name=handFeeT>
<input type=hidden name=customPass>
<input type=hidden name=idCardNo>
<input type=hidden name=custAddress>
<input type=hidden name=backLoginAccept>
<input type=hidden name=backDate>
<input type=hidden name=favFlag value="<%=favFlag%>">
<input type=hidden name=loginAccept>
<input type=hidden name=smName>
<input type=hidden name=simBell
       value="   手机上网可选套餐优惠的GPRS流量仅指CMWAP节点产生的流量.  彩铃下载：1.购彩铃包年卡,送价值88元德赛电池。  2.登陆龙江风采（wap.hljmonternet.com）使用手机上网：体验图铃下载、新闻资讯、网络美文免费体验区下载铃音、时尚屏保,免收信息费！拨打1860开通GPRS 。">
<input type=hidden name=worldSimBell
       value="    您办理此业务后，即成为我公司全球通签约客户，在签约期限内使用我公司业务及产品，同时执行月底限消费政策。您交纳的预存款需在消费期限内消费完毕，同时您获赠的积分在积分使用期限后方可使用。       在协议有效期内若遇国家资费标准调整，按国家新的资费政策执行。       做为全球通客户，您将享受我公司为您提供的尊贵服务。">
<div id="relationArea" style="display:none"></div>
			<div id="wait" style="display:none">
			<img  src="/nresources/default/images/blue-loading.gif" />
		</div>
		<div id="beforePrompt"></div>       
<%@ include file="/npage/include/footer_simple.jsp" %>
</FORM>
<OBJECT classid="clsid:2F593576-E694-46B5-BF4F-9F23C1020642" height=1 id=evalControl width=1>
</OBJECT> 
</BODY>
<%@ include file="/npage/public/hwObject.jsp" %> 
</HTML>


